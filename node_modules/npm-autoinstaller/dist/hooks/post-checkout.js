'use strict';

var _child_process = require('child_process');

var _updatePackages = require('../updatePackages');

var _log = require('../log');

// we get 3 parameters from git: <previous HEAD> <new HEAD> <flag>
if (process.argv.length < 5) {
  (0, _log.error)('invalid parameters specified!');
  process.exit(1);
}

// only execute the hook if it's a branch checkout
if (process.argv[4] === '1') {
  var changedFiles = (0, _child_process.execSync)('git diff --name-only ' + process.argv[2] + ' ' + process.argv[3]);
  (0, _updatePackages.checkForUpdates)(changedFiles.toString());
}